System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(e,t){"use strict";var n,o,r;return{setters:[function(e){n=e.a,o=e.o},function(e){r=e.A}],execute:function(){function e(e){const t=document.createElement("input");return t.setAttribute("type","hidden"),t.setAttribute("name",e.name),t.setAttribute("value",e.value),t}n("change",".js-scanning-alert-check",(function({currentTarget:t}){const n=t.closest(".js-scanning-alert-list"),o=null!=n.querySelector(".js-scanning-alert-check:checked"),r=n.querySelector(".js-scanning-filter-options"),s=n.querySelector(".js-scanning-alert-bulk-actions"),c=n.querySelector(".js-scanning-alert-links");r&&(r.hidden=o),s&&(s.hidden=!o),c&&(c.hidden=o),function(t){let n=!1;const o=t.querySelectorAll(".js-scanning-fixed-alert-numbers"),r=0!==o.length?JSON.parse(o[0].getAttribute("data-numbers")||"[]"):[];for(const s of t.querySelectorAll(".js-scanning-bulk-action-items")){s.innerHTML="";const o=t.querySelectorAll(".js-scanning-alert-list [data-check-all-item]:checked");for(const t of o)n||(n=-1!==r.indexOf(parseInt(t.value))),s.appendChild(e(t))}for(const e of t.querySelectorAll(".js-scanning-reopen-button"))e.hidden=n;for(const e of t.querySelectorAll(".js-scanning-reopen-button-disabled"))e.hidden=!n}(n)})),n("details-menu-selected",".js-scanning-code-path-menu",(function(e){const t=e.detail.relatedTarget.getAttribute("data-target-code-path");for(const n of document.querySelectorAll(".js-scanning-code-path"))n.hidden=t!==n.getAttribute("data-code-path")}),{capture:!0}),o(".js-add-secret-format-button",{add(){window.postProcessingExpressionCount=0}}),n("click",".js-add-secret-format-button",(e=>{const t=e.currentTarget;if(t&&window.postProcessingExpressionCount<3){const e=document.querySelectorAll(".js-additional-secret-format");if(!e)return;for(const n of e)if(n.classList.contains("has-removed-contents")){n.classList.toggle("has-removed-contents",!1),window.postProcessingExpressionCount++,3===window.postProcessingExpressionCount&&(t.hidden=!0);break}}})),n("click",".js-remove-secret-format-button",(e=>{const t=document.querySelector(".js-add-secret-format-button");if(!t)return;const n=e.currentTarget;if(!n)return;const o=n.closest(".js-additional-secret-format");if(!o)return;o.classList.toggle("has-removed-contents",!0);o.getElementsByClassName("js-post-processing-input")[0].value="",window.postProcessingExpressionCount--,window.postProcessingExpressionCount<3&&(t.hidden=!1)})),o(".js-test-code",{async add(){const e=document.querySelector(".js-test-code"),n=e.clientHeight,o=e.clientWidth,r=await t.import("./chunk-codemirror.js");if(window.codeEditor=r.default.fromTextArea(e,{lineNumbers:!1,lineWrapping:!0,mode:"text/x-yaml",theme:"github-light",inputStyle:"contenteditable",value:e.value,lineSeparator:"\r\n"}),0!==n&&0!==o){const e=document.querySelector(".CodeMirror");e&&(e.style.height=n+"px",e.style.width=o+"px",e.style.border="1px solid #e1e4e8",e.style.borderRadius="6px")}window.codeEditor.save()}}),r(".js-add-custom-secret-scanning-pattern-form *",(function(e){const t=document.querySelector(".js-create-custom-pattern-button");t instanceof HTMLElement&&(e.preventDefault(),t.setAttribute("disabled","true"))})),n("submit","form.js-test-custom-secret-scanning-pattern",(async function(e){const t=e.currentTarget;if(!(t instanceof HTMLFormElement))return;const n=document.querySelector(".js-create-custom-pattern-button");if(!(n instanceof HTMLElement))return;const o=document.querySelector(".js-error-banner");if(!o)return;e.preventDefault();const r=document.querySelector(".js-add-custom-secret-scanning-pattern-form");if(!(r instanceof HTMLFormElement))return;const c=document.querySelector(".js-test-pattern-matches");if(!c)return;for(const d of r.elements)d instanceof HTMLInputElement&&d.name&&("text"===d.type||"radio"===d.type&&d.checked)&&s(t,d.name,d.value);let i;try{const e=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}});e.ok&&(i=await e.json())}catch(a){}if(i)if(i.error)i.error.message&&(o.hidden=!1,o.firstElementChild&&(o.firstElementChild.textContent=i.error.message),n.setAttribute("disabled","true"));else if(o.hidden=!0,n.removeAttribute("disabled"),i.has_matches){const e=JSON.parse(i.matches);1===e.length?c.textContent=" - 1 match":c.textContent=` - ${e.length} matches`;for(const t of e){const e=window.codeEditor.posFromIndex(t.start),n=window.codeEditor.posFromIndex(t.end);window.codeEditor.markText(e,n,{className:"bg-yellow-2"})}}else{c.textContent=" - No matches";const e=window.codeEditor.posFromIndex(0),t=window.codeEditor.posFromIndex(window.codeEditor.getValue().length);for(const n of window.codeEditor.findMarks(e,t))n.clear()}}));const s=(e,t,n)=>{const o=document.createElement("input");o.type="hidden",o.name=t,o.id=t,o.value=n,e.appendChild(o),o.required=!0}}}}));
//# sourceMappingURL=scanning-43eed7e3.js.map
